<!DOCTYPE html>
<html>

<head>
    <title>login</title>
    <script type="text/javascript" src="./dist/asset/js/jquery-3.0.0.js"></script>
    <link rel="stylesheet" type="text/css" href="./dist/asset/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="./dist/asset/css/amazeui.css">
    <style type="text/css">
    [class*="am-u-"] + [class*="am-u-"]:last-child {
        float: left;
    }
    
    .memberlist {
        display: inline-block;
        position: relative;
    }
    
    .text {
        width: 100%;
        height: 20rem;
    }
    </style>
</head>

<body>
    <div>
        UserName:
        <input id="username" type="text" name="username"> Password:
        <input id="password" type="password" name="password">
        <button id="login">login</button>
    </div>
    <div style="margin-top:15px;">
        <input type="button" id="connect" value="websocket connect" />
        <input type="button" id="send" value="websocket send" />
        <input type="button" id="close" value="websocket close" />
    </div>
    <div>
        <input type="text" id="input">
    </div>
    <div class="am-g">
        <div class="am-u-sm-6">
            <textarea id="content" class="text"></textarea>
        </div>
        <div class="am-u-sm-4">
            <ul class="memberlist">
                <li>longxboy</li>
            </ul>
        </div>
    </div>
    <script type="text/javascript" src="./dist/websocket.js"></script>
    <script type="text/javascript">
    $("#login").bind("click", function() {
        $.ajax({
            url: "/login",
            contentType: 'application/json; charset=UTF-8',
            dataType: 'json',
            method: 'POST',
            data: JSON.stringify({
                UserName: $("#username").val(),
                Password: $('#password').val()
            })
        }).done(function(data) {
            if (data.StatusCode == 0) {
                //window.location = "chat.html";
                alert(data.Data.User.Id);
                window.UserId = data.Data.User.Id
            }
        });
    });
    </script>
</body>

</html>
